if (self.CavalryLogger) { CavalryLogger.start_js_script(document.currentScript); }/*FB_PKG_DELIM*/

__d("XVideoHomeMobileCommentsModalController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/watch/msite/comments/",{video_id:{type:"FBID",required:!0},comment_modal_body_id:{type:"String"}})}),null);
__d("MVideoHomePermalinkComments",["cx","$","CSS","Event","MLegacyDataStore","MParent","MRequest","Stratcom","VideoHomeTypedLogger","XVideoHomeMobileCommentsModalController"],(function(a,b,c,d,e,f,g,h){"use strict";var i=[],j=[];function k(a,b,e){if(j.includes(b))return;var f=c("$")(b);f=d("MParent").bySigil(f,"m-layer-root");if(f==null)return;f=d("MLegacyDataStore").get(f).layer;f.addListener("show",function(){if(!i.includes(b)){var d=new(c("MRequest"))().setURI(c("XVideoHomeMobileCommentsModalController").getURIBuilder().setFBID("video_id",a).setString("comment_modal_body_id","#".concat(b)).getURI()),e=d.listen("done",function(){i.push(b),f(),new(c("VideoHomeTypedLogger"))().setEvent("logged_out_msite_comment_modal_impression").log()}),f=e.remove;d.send()}document.body&&c("CSS").addClass(document.body,"_9da8")});f.addListener("hide",function(){document.body&&c("CSS").removeClass(document.body,"_9da8")});j.push(b);if(e!==""){var g=document.createEvent("MouseEvents");g.initEvent("click",!0,!0);window.setTimeout(function(){c("$")(e).dispatchEvent(g)},0)}}a={forwardCommentButtonClick:function(a,b){var d=c("$")(b),e=document.createEvent("MouseEvents");e.initEvent("click",!0,!0);c("Event").listen(a,"click",function(){d.dispatchEvent(e)})},initCommentBottomsheetObserver:function(a,b,d){var e=c("Stratcom").listen("m:layer:init",null,function(){k(a,b,d)}),f=c("Stratcom").listen("m:page:unload",null,function(){e.remove(),f.remove()})}};g["default"]=a}),98);